# =============================================================================
# Ouroboros Backend Environment Configuration
# =============================================================================
# Copy this file to .env and customize for your environment.
# All settings have sensible defaults for development.
#
# 12-Factor App Principles:
# - All configuration is loaded from environment variables
# - No secrets are stored in code
# - Environment determines behavior (production, development, testing)
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Project name displayed in API docs and logs
# PROJECT_NAME=Ouroboros

# Application version
# VERSION=0.1.0

# Application environment: production, development, or testing
# - production: Secure cookies, strict security settings
# - development: Relaxed security for local development
# - testing: Used for automated tests
ENVIRONMENT=development

# CORS origins allowed to access the API (JSON array format)
# Example: ["http://localhost:5173", "https://app.example.com"]
# BACKEND_CORS_ORIGINS=[]

# -----------------------------------------------------------------------------
# Security (CRITICAL: Change these in production!)
# -----------------------------------------------------------------------------
# Secret key for general application security (sessions, etc.)
# Generate with: openssl rand -hex 32
SECRET_KEY=change-me-in-production-use-openssl-rand-hex-32

# JWT secret key for token signing
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=change-me-in-production-use-openssl-rand-hex-32

# JWT access token expiration time in minutes
# Default: 60 (1 hour)
# ACCESS_TOKEN_EXPIRE_MINUTES=60

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# PostgreSQL connection settings
POSTGRES_SERVER=localhost
POSTGRES_USER=ouroboros
POSTGRES_PASSWORD=ouroboros
POSTGRES_DB=ouroboros

# Database Connection Pool Settings
# Pool size: Number of persistent connections (1-20)
# DB_POOL_SIZE=5

# Max overflow: Additional connections allowed beyond pool_size
# DB_MAX_OVERFLOW=10

# Pool timeout: Seconds to wait for a connection from the pool
# DB_POOL_TIMEOUT=30

# Pool recycle: Seconds after which connections are recycled (-1 to disable)
# Helps avoid stale connections with PostgreSQL
# DB_POOL_RECYCLE=1800

# Echo SQL: Log all SQL statements (development debugging only)
# WARNING: Exposes query data in logs, never enable in production
# DB_ECHO=false

# -----------------------------------------------------------------------------
# First Superuser (Initial Admin Account)
# -----------------------------------------------------------------------------
# Email and password for the initial admin account created on first startup
# CRITICAL: Change these in production!
FIRST_SUPERUSER=admin@ouroboros.local
FIRST_SUPERUSER_PASSWORD=change-me-in-production

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
# Redis server for caching and Celery message broker
REDIS_HOST=localhost
# REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Celery (Background Tasks)
# -----------------------------------------------------------------------------
# Celery broker URL (Redis database 0)
CELERY_BROKER_URL=redis://localhost:6379/0

# Celery result backend URL (Redis database 0)
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# Hashcat Configuration
# -----------------------------------------------------------------------------
# Path to hashcat binary
# Use full path if not in system PATH
# HASHCAT_BINARY_PATH=hashcat

# Default workload profile (1-4)
# 1 = Low, 2 = Default, 3 = High, 4 = Nightmare (may affect system responsiveness)
# DEFAULT_WORKLOAD_PROFILE=3

# Enable additional/experimental hash types
# ENABLE_ADDITIONAL_HASH_TYPES=false

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# LOG_LEVEL=INFO

# Enable file logging (in addition to stdout)
# LOG_TO_FILE=false

# Path to log file (when file logging is enabled)
# LOG_FILE_PATH=logs/app.log

# Log file retention policy (e.g., "10 days", "1 week")
# LOG_RETENTION=10 days

# Log file rotation policy (e.g., "10 MB", "100 MB", "1 day")
# LOG_ROTATION=10 MB

# -----------------------------------------------------------------------------
# Resource Management
# -----------------------------------------------------------------------------
# Maximum file size (in MB) for in-browser resource editing
# Larger files must be downloaded and edited offline
# RESOURCE_EDIT_MAX_SIZE_MB=1

# Maximum number of lines for in-browser resource editing
# Larger files must be downloaded and edited offline
# RESOURCE_EDIT_MAX_LINES=5000

# Timeout in seconds for background verification of resource uploads
# If the file is not uploaded within this time, the resource is deleted
# RESOURCE_UPLOAD_TIMEOUT_SECONDS=900

# -----------------------------------------------------------------------------
# Upload Limits
# -----------------------------------------------------------------------------
# Maximum upload size for crackable files in bytes
# Default: 104857600 (100 MB)
# UPLOAD_MAX_SIZE=104857600

# -----------------------------------------------------------------------------
# MinIO (S3-Compatible Object Storage)
# -----------------------------------------------------------------------------
# MinIO endpoint (host:port)
MINIO_ENDPOINT=minio:9000

# MinIO access credentials
# CRITICAL: Change these in production!
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin

# MinIO bucket name for storing resources
# MINIO_BUCKET=ouroboros-resources

# Enable HTTPS for MinIO connections
# Set to true if MinIO is configured with TLS
# MINIO_SECURE=false

# Optional: MinIO region (e.g., "us-east-1")
# Only needed for AWS S3 compatibility or region-specific configurations
# MINIO_REGION=

# -----------------------------------------------------------------------------
# Cache
# -----------------------------------------------------------------------------
# Cache connection string for cashews library
# Options:
# - Memory: mem://?check_interval=10&size=10000
# - Redis: redis://localhost:6379/1
# - Disk: disk://path/to/cache?size=1000000000
# CACHE_CONNECT_STRING=mem://?check_interval=10&size=10000

# =============================================================================
# Docker Compose Overrides
# =============================================================================
# When using Docker Compose, these values are typically overridden:
# - POSTGRES_SERVER=db
# - REDIS_HOST=redis
# - MINIO_ENDPOINT=minio:9000
# - CELERY_BROKER_URL=redis://redis:6379/0
# - CELERY_RESULT_BACKEND=redis://redis:6379/0
# =============================================================================
